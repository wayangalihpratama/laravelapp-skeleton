# ADR-001: Image Management with Spatie Media Library

- **Status**: Proposed
- **Date**: 2026-02-18
- **Context**: The tourism website is image-heavy (temple photos, art galleries, artist portfolios, photo gallery). We need a solution for image upload, storage, optimization, and responsive delivery. Key requirements:
  - WebP conversion for modern browsers
  - Responsive image sizes (thumbnail, medium, large)
  - Lazy loading support
  - Admin interface integration with Filament
  - `alt_text` management for SEO

- **Decision**: Use `spatie/laravel-medialibrary` v11 for image management.

- **Alternatives Considered**:
  1. **Manual file uploads via Laravel Storage** — Simple but requires custom code for resizing, format conversion, and Filament integration
  2. **Cloudinary / imgix** — Excellent CDN-based image optimization but adds external dependency and cost for an MVP
  3. **Intervention Image (standalone)** — Good for processing but no model association, no Filament plugin

- **Consequences**:
  - ✅ Native Filament integration via `SpatieMediaLibraryFileUpload`
  - ✅ Automatic format conversion (WebP) and responsive variants
  - ✅ Model-level media association (polymorphic)
  - ✅ Well-maintained, Laravel ecosystem standard
  - ⚠️ Adds ~2MB to vendor size
  - ⚠️ Requires `media` table migration
  - ⚠️ Requires GD or Imagick PHP extension (already in Docker image)

---

# ADR-002: Sitemap Generation Strategy

- **Status**: Proposed
- **Date**: 2026-02-18
- **Context**: SEO requires an auto-generated `sitemap.xml` that includes all published pages, attractions, artists, and events. The sitemap must update when content is published or unpublished.

- **Decision**: Use `spatie/laravel-sitemap` for sitemap generation, triggered by a scheduled artisan command (daily) and optionally on content publish via Eloquent observers.

- **Alternatives Considered**:
  1. **Static sitemap file** — Doesn't update with CMS content changes
  2. **Dynamic route-based generation on every request** — Performance overhead for every sitemap request
  3. **Custom artisan command** — Works but reinvents what the package does well

- **Consequences**:
  - ✅ Lightweight package, <100KB
  - ✅ Supports custom URL mapping and priorities
  - ✅ Can be cached and regenerated on schedule
  - ⚠️ Needs `SitemapController` or scheduled task to regenerate

---

# ADR-003: Bilingual Content Strategy

- **Status**: Proposed
- **Date**: 2026-02-18
- **Context**: The site must serve content in English and Indonesian. Options range from full i18n frameworks (Laravel localization files) to database-level content variants.

- **Decision**: Use a **per-entity `language` field** approach. Each content entity (Page, Attraction, Artist, Event) has a `language` column (`en` or `id`). Content is duplicated per language. A `SetLocale` middleware reads the URL prefix (`/en/`, `/id/`) or defaults to `en`.

- **Alternatives Considered**:
  1. **Laravel's built-in localization (lang files)** — Good for UI strings but CMS content needs DB storage
  2. **Spatie Laravel Translatable** — JSON column per translatable field. Complex for admin UX, harder to query/filter
  3. **Separate tables per language** — Over-normalized, complex joins

- **Consequences**:
  - ✅ Simple to implement and query (`where('language', $locale)`)
  - ✅ Each language version has its own slug, meta tags, and SEO content
  - ✅ Filament admin shows language filter — admin creates/edits per-language content
  - ✅ `hreflang` tags easy to generate (link EN ↔ ID variants)
  - ⚠️ Content duplication (each entity exists twice if both languages are needed)
  - ⚠️ No automatic translation — village admin must provide both versions
